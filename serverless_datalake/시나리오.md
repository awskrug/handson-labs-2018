# 실습 시나리오

슬라이드 작성을 위해 잠깐 작성하는 문서이며 실제 실습에서는 아래 내용을 바탕으로 제작된 슬라이드로 진행할 예정입니다.

국립공원 레인저들과 GIS전문가가 수집한 수목 자료를 잘 적재하고 빠른 시간안에
코딩을 잘몰라도 쉽게 분석해줄수 있는 시스템을 만들어달라는 부탁읃 받았습니다.
또한 GIS 전문가와 데이터사이언티스트가 언제든지 접근 가능하도록
shp파일과 josn파일로 관리 해달라는 요청을 받았습니다.

그리고 별도로 두가지 요청사항이 있습니다.
1. 개발비는 많이 지원가능! But!!! 실 사용자가 적고 가끔 분석을 하기에 유지비는 최대한 적거나 요청시에만 비용이 청구되게 해주세요
2. 여러 국립공원에서 쉽게 적용 가능하며 부분적으로 배포 할수 있게 해주세요
(위 내용은 언제까지나 픽션이며 사실과 다릅니다.)

# 입력되는 자료

우리가 구축할 데이터레이크에는 두가지 종류의 자료가 들어옵니다.
자료는 업로더가 직접 S3에 업로드 해준다고 하네요!(다행입니다. API는 안만들어도 되군요:)

1. 레인저들이 산에서 수목좌표를 직접 취득한 자료의 압축파일
    - 압축파일에는 두개의 파일이 존재합니다
    - 각 GPS에 숫자가 태깅된 파일 + 각 숫자에 수목 정보가 담긴 csv파일
    - 추후 GIS분석가가 바로 분석에 활용할수 있도록 SHP파일로 변환하는 전처리 작업이 필요합니다.
    - 전처리 작업후에는 전혀 불필요한 자료이기에 삭제를 해야 합니다

2. GIS 전문가 직접 수목정보 수집후 생산한 SHP 파일
    - GIS 전문가는 비싼 장비를 사용하기에 현장에서 바로 수목정보가 담긴 SHP파일을 생성 가능합니다.
    - 별도의 전처리는 필요없지만 저장비용이 저렴해야 합니다.


# 데이터레이크 설계 하기

### 자료 수집
- 레인저 업로드용 S3와 보관용 S3 두개를 사용
- 레인저 업로드용 S3는 한달 이후 완전 삭제
- SHP 보관용 S3는 6개월이 지나면 자동으로 글래셔로 변환됨

### 자료 전처리
- 보관용 S3에 SHP자료 업로드시 자동으로 json형식으로 변환하여 json 폴더에 저장

- SHP 저장소는 업로드 6개월뒤에는 자동으로 글래셔로 전환
- 또한 SHP 저장소에서는 자동으로 업로드된 내용을 json형식으로 변환
-

### 자료분석 1 - ES로 인덱싱
- S3에 저장되는 내용을 지속적으로 ES에 반영
- Kinesis를 통해 간단하게 입력된 자료 확인
- 미션
    1. 털조장나무 종자를 채집하기 위한 적절한 시기 및 주요 분포 지역 추출
    2. 리기다소나무와 소나무의 차이점을 비교하는 교육 프로그램 개발을 위한 적절한 위치 탐
    3. 좌표 xxx,xxx에 산불 발생시 예상되는 피해 수목 목록


#### 자료분석 2 - QuickSight 및 Athena 를 이용하여 분석해보기
-
- S3에 저장된 json을 바탕으로 Glue를 이용해 주기적으로 테이블 생성하게 함
- Athena에서 아래 미션 수행해보기
- 미션
    1. 조사된 수목 종류
    2. 수목별 개체수 수량
    2. 수목별 분포 고도
- QuickSight를 이용하여 도표화 하기
- 미션
    1. 조사된 수목 종류 표시(테이블)
    2. 수목별 개체수 수량(히트맵)
    3. 수목별 분포 고도(수평 막대바)
        - 원활한 분석을 위해 고도를 100m 간격으로 구분


